<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Диалог с Базой знаний</title>
        <link rel="icon" type="image/png" sizes="32x32" href="images/molecula.ico">
        <link rel="stylesheet" href="/CSS/css.css">
        <script src="https://kit.fontawesome.com/dbed6b6114.js" crossorigin="anonymous"></script>   
        <script src="https://webasr.yandex.net/jsapi/v1/webspeechkit.js" type="text/javascript"></script>
        <script src="/JS/dialog.js"></script>
        <script src="/JS/scroll.js"></script>
        <script src="/JS/jquery.js"></script>
    </head>
    <body id="page-top" onload="dialog_window();">
        
        <!-- header -->
        <header class = "header">

            <div class = "nav-section"> 
                <div class = "brand-and-navBtn">
                    <span class = "navBtn flex">
                        <i class = "fas fa-bars"></i>
                    </span>
                </div>

                <!-- navigation menu -->
                <nav class = "top-nav">
                    <ul>
                        <li><a href = "/map/index.html">Главная</a></li>
                        <li><a href = "/map/teoria.html">Теория</a></li>
                        <li><a href = "/map/Карта установки_Canvas.html">Структура</a></li>
                        <li><a href = "/map/simulator.html">Симулятор</a></li>
                    </ul>
                </nav>
            </div>

            <div class = "container about">
                <div class = "about-content">
                    <h2>Лабораторная установка</h2>
                    <h3>Удельная объемная изобарная теплоемкость воздуха</h3>
                </div>
            </div>
        </header>
        <!-- end of header -->

        <section id="simulator" class="container">
            <table class="table table-striped thead-light">
              <thead>
                <tr>
                  <th scope="col">Вопросы</th>
                  <th scope="col">Ответы</th>
                </tr>
              </thead>
              <tbody id="knowledgeTable">
                
              </tbody>
            </table>
          </section>

        <!-- footer -->
        <footer class = "footer">
            <div class = "footer-container container">
                <div>
                    <h2>Zhuk Svetlana</h2>
                    <p>© BSTU 2024</p>
                    <div class = "social-icons">
                        <ul>
                            <li>
                                <a href="https://vk.com/iamalwaysone" target="_blank"><i class="fab fa-vk"></i></a>
                            </li>
                            <li>
                                <a href="https://www.instagram.com/ascoltat0/" target="_blank"><i class="fab fa-instagram"></i></a>
                            </li>
                            <li>
                                <a href = "https://www.linkedin.com/in/%D0%BC%D1%8F%D1%83-%D0%BC%D1%8F%D1%83-ab671b282/" target="_blank"><i class = "fab fa-linkedin-in"></i></a>
                            </li>
                            <li>
                                <a href = "https://github.com/asc0ltato" target="_blank"><i class = "fab fa-github"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div>
                    <h3>Задай вопрос</h3>
                    <div class = "subs">
                        <i class = "fas fa-envelope"></i>
                        <input type = "email" id = "email" placeholder="Почта">
                        <button type = "submit" id = "submit">Отправить</button>
                    </div>
                </div>
            </div>
        </footer>
        <!-- end of footer -->

        <div class="scroll">
            <img class = "scroll_up" src="/images/scroll.svg" alt="scroll">
        </div>

        <script>
            let inputQuestion = document.querySelector(".question");
            let answer = document.querySelector(".answer");
            var knowledgeBase = [
                ["теплоемкость", "характеризует", "способность тела поглощать теплоту"],
                ["теплоемкостью тела", "называется", "количество теплоты, которое необходимо подвести к телу или отнять от него для изменения его температуры на 1°С <br><img src='/images/formula1.jpg'/>"],
                ["истинной теплоемкостью", "называют", "отношение бесконечно малого количества теплоты, которое сообщается телу, к бесконечно малому изменению температуры"],
                ["средняя теплоемкость", "- это", "количество теплоты, которое сообщается телу при повышении температуры от Т1 до Т2 <br><img src='/images/formula2.jpg'/>"],
                ["удельная теплоемкость", "- это", "количество теплоты для нагрева единицы вещества на 1°C"],
                ["удельная теплоемкость", "измеряется", "в Дж/(кг·К), Дж/(кмоль·К), Дж/(м3·К)"],
                ["сжижение газа", "сопровождается", "уменьшением объема и увеличением плотности"],
                ["перемещение тепла", "происходит", "по направлению от горячего тела к холодному"],
                ["количество теплоты", "определяется", "выражением q = mcΔT"],
                ["скорость испарения", "зависит", "от температуры поверхности жидкости"],
                ["количество теплоты", "равно", "q = mc(T2 - T1) для конечного процесса"],
                ["объемная теплоемкость", "характеризует", "количество теплоты на единицу объема <br><img src='/images/formula5.jpg'/>"],
                ["молярная теплоемкость", "определяется", "теплотой для нагрева одного моля вещества <br><img src='/images/formula4.jpg'/>"],
                ["средняя теплоемкость", "вычисляется", "по формуле c = Q / (T2 - T1)"],
                ["соотношение теплоемкостей", "выражается", "<br><img src='/images/formula6.jpg'/>"],
                ["теплоемкость идеальных газов", "зависит", "от температуры"],
                ["теплоемкость реальных газов", "зависит", "от природных свойств, температуры и давления"],
                ["молярная масса", "обозначается", "μ"],
                ["теплоемкость воздуха", "зависит", "от изобарных и изохорных процессов"],
                ["концентрация молекул", "влияет", "на скорость химической реакции"],
                ["теплоемкость", "бывает", "массовая, объемная и молярная"],
                ["физические свойства", "включают", "плотность, давление, температуру"],
                ["плотность", "зависит", "от температуры и давления"],
                ["идеальный газ", "описан", "уравнением состояния PV = nRT"],
                ["количество вещества", "измеряется", "в молях"],
                ["энергия", "передается", "в форме теплоты"],
                ["теплопроводность", "определяет", "способность передавать теплоту через вещество"],
                ["температурный градиент", "определяет", "направление и скорость теплообмена между телами"],
                ["теплообмен", "включает", "теплопроводность, конвекцию, излучение"],
                ["конвекция", "характеризуется", "переносом тепла потоком вещества"],
                ["излучение", "является", "процессом передачи энергии электромагнитными волнами"],
                ["рабочее тело", "поглощает", "теплоту в термодинамическом процессе"],
                ["изобарный процесс", "происходит", "при постоянном давлении"],
                ["изохорный процесс", "происходит", "при постоянном объеме"],
                ["изотермический процесс", "происходит", "при постоянной температуре"],
                ["адиабатический процесс", "происходит", "без теплообмена с окружающей средой"],
                ["температура", "измеряется", "в Кельвинах или градусах Цельсия"],
                ["энтальпия", "определяется", "суммой внутренней энергии и произведения давления на объем"],
                ["внутренняя энергия", "зависит", "от температуры и количества вещества"],
                ["термодинамическая система", "состоит", "из рабочего тела и окружающей среды"],
                ["рабочее тело", "отдает", "теплоту в процессе охлаждения"],
                ["калориметр", "используется", "для измерения теплоемкости веществ, таких как жидкости, твердые тела или газы"],
                ["тепловая энергия", "измеряется", "в Джоулях"],
                ["переход фаз", "сопровождается", "энергетическими изменениями в веществе"],
                ["сравнение теплоемкостей", "показывает", "что вода имеет высокую теплоемкость"],
                ["энтропия", "увеличивается", "в необратимых процессах"],
                ["суммарная энергия", "включает", "внутреннюю и кинетическую энергию системы"],
                ["необратимый процесс", "характеризуется", "ростом энтропии"],
                ["тепловой поток", "равен", "количеству теплоты, передаваемой за единицу времени"],
                ["постоянная Больцмана", "связана", "с температурой и энергией молекул"],
                ["кинетическая энергия молекул", "зависит", "от температуры"],
                ["постоянная Больцмана", "равна", "1.38 × 10⁻²³ Дж/К"],
                ["газовые законы", "включают", "законы Бойля, Шарля, Гей-Люссака"],
                ["закон Бойля", "утверждает", "что PV = const при постоянной температуре"],
                ["закон Шарля", "определяет", "что V/T = const при постоянном давлении"],
                ["закон Гей-Люссака", "определяет", "что P/T = const при постоянном объеме"],
                ["тепловая мощность", "определяется", "как количество тепла, передаваемого в единицу времени"],
                ["константа", "характеризует", "физические свойства вещества"],
                ["изобарная теплоемкость", "характеризует", "количество теплоты при постоянном давлении"],
                ["изохорная теплоемкость", "характеризует", "количество теплоты при постоянном объеме"],
                ["удельная теплоемкость", "зависит", "от агрегатного состояния вещества"],
                ["фаза вещества", "включает", "твердое, жидкое, газообразное состояния"],
                ["испарение", "характеризуется", "переходом вещества из жидкого в газообразное состояние"],
                ["кипение", "происходит", "при достижении температуры кипения"],
                ["точка кипения", "зависит", "от давления"],
                ["теплоемкость воздуха", "определяется", "характером термодинамического процесса"],
                ["процесс расширения", "сопровождается", "охлаждением газа"],
                ["сжатие газа", "увеличивает", "его температуру"],
                ["константа газа R", "равна", "8.31 Дж/(моль·К)"],
                ["объем газа", "зависит", "от температуры и давления"],
                ["мольная масса воздуха", "равна", "28.97 г/моль"],
                ["уравнение состояния", "связывает", "давление, объем и температуру"],
                ["переход фаз", "характеризуется", "изменением агрегатного состояния"],
                ["рабочее тело", "получает", "энергию в форме тепла"],
                ["давление", "измеряется", "в Паскалях"],
                ["кинетическая энергия молекул", "обусловлена", "температурой вещества"],
                ["тепловой процесс", "характеризуется", "передачей энергии между телами"],
                ["калориметрический эксперимент", "позволяет", "определить удельную теплоемкость"],
                ["конвекция", "- это", "передача тепла через поток жидкости или газа"],
                ["тепловой баланс", "определяется", "сохранением энергии"],
                ["количество теплоты", "передается", "через стенки сосуда"],
                ["энергия", "сохраняется", "в замкнутой системе"],
                ["первый закон термодинамики", "определяет", "сохранение энергии"],
                ["второй закон термодинамики", "определяет", "рост энтропии в изолированных системах"],
                ["эффективность", "зависит", "от обратимости процесса"],
                ["тепловая энергия", "перемещается", "в виде волн через вакуум"],
                ["скорость теплообмена", "определяется", "температурным градиентом"],
                ["теплоизоляция", "уменьшает", "скорость теплообмена"],
                ["свойства теплоемкости", "включают", "изменение при переходе фаз"],
                ["удельная теплоемкость воды", "равна", "4.18 Дж/(г·К)"],
                ["энергия молекул", "определяет", "температуру системы"],
                ["молекулярная кинетика", "описывает", "движение частиц в веществе"],
                ["термодинамическая работа", "определяется", "производным объемом и давлением"],
                ["газ", "описывается", "уравнением состояния PV = nRT"],
                ["фазовые переходы", "сопровождаются", "изменением теплоемкости"],
                ["кристаллизация", "происходит", "при переходе жидкости в твердое состояние"],
                ["интенсивность испарения", "зависит", "от температуры, площади поверхности жидкости, давления и свойств испаряющегося вещества"],
                ["диффузия", "характеризуется", "перемешиванием частиц из-за их теплового движения"],
                ["скорость диффузии", "зависит", "от температуры и концентрации"],
                ["энергия связи", "определяется", "прочной связью между атомами в веществе, таком как металлы, кристаллы, или молекулярные соединения"],
            ];
       
            var questionsArray = [
                ["Что характеризует теплоемкость?"],
                ["Что называется теплоемкостью тела?"],
                ["Что называют истинной теплоемкостью?"],
                ["Что такое средняя теплоемкость?"],
                ["Что такое удельная теплоемкость?"],
                ["В каких единицах измеряется удельная теплоемкость?"],
                ["Чем сопровождается сжижение газа?"],
                ["Как происходит перемещение тепла?"],
                ["Каким выражением определяется количество теплоты?"],
                ["От чего зависит скорость испарения?"],
                ["Чему равно количество теплоты?"],
                ["Что характеризует объемная теплоемкость?"],
                ["Как определяется молярная теплоемкость?"],
                ["По какой формуле вычисляется средняя теплоемкость?"],
                ["Как выражается соотношение теплоемкостей?"],
                ["От чего зависит теплоемкость идеальных газов?"],
                ["От чего зависит теплоемкость реальных газов?"],
                ["Как обозначается молярная масса?"],
                ["От чего зависит теплоемкость воздуха?"],
                ["На что влияет концентрация молекул?"],
                ["Какая бывает теплоемкость?"],
                ["Что включают физические свойства?"],
                ["От чего зависит плотность?"],
                ["Как описан идеальный газ?"],
                ["В каких единицах измеряется количество вещества?"],
                ["Какими способами передается энергия?"],
                ["Что определяет теплопроводность?"],
                ["Что определяет температурный градиент?"],
                ["Что включает теплообмен?"],
                ["Чем характеризуется конвекция?"],
                ["Чем является излучение?"],
                ["Что поглощает рабочее тело?"],
                ["При каком условии происходит изобарный процесс?"],
                ["При каком условии происходит изохорный процесс?"],
                ["При каком условии происходит изотермический процесс?"],
                ["Без чего происходит адиабатический процесс?"],
                ["В каких единицах измеряется температура?"],
                ["Чем определяется энтальпия?"],
                ["От чего зависит внутренняя энергия?"],
                ["Из чего состоит термодинамическая система?"],
                ["Что отдает рабочее тело?"],
                ["Как используется калориметр?"],
                ["В каких единицах измеряется тепловая энергия?"],
                ["Чем сопровождается переход фаз?"],
                ["Что показывает сравнение теплоемкостей?"],
                ["Где увеличиваются энтропия?"],
                ["Что включает суммарная энергия?"],
                ["Чем характеризуется необратимый процесс?"],
                ["Чему равен тепловой поток?"],
                ["С чем связана постоянная Больцмана?"],
                ["От чего зависит кинетическая энергия молекул?"],
                ["Чему равна постоянная Больцмана?"],
                ["Какие законы включают газовые законы?"],
                ["Что утверждает закон Бойля?"],
                ["Что определяет закон Шарля?"],
                ["Что определяет закон Гей-Люссака?"],
                ["Как определяется тепловая мощность?"],
                ["Что характеризует константа?"],
                ["Что характеризует изобарная теплоемкость?"],
                ["Что характеризует изохорная теплоемкость?"],
                ["От чего зависит удельная теплоемкость?"],
                ["Какие состояния включает фаза вещества?"],
                ["Чем характеризуется испарение?"],
                ["При каком условии происходит кипение?"],
                ["От чего зависит точка кипения?"],
                ["Чем определяется теплоемкость воздуха?"],
                ["Чем сопровождается процесс расширения?"],
                ["Что увеличивает сжатие газа?"],
                ["Чему равна константа газа R?"],
                ["От чего зависит объем газа?"],
                ["Чему равна мольная масса воздуха?"],
                ["Что связывает уравнение состояния?"],
                ["Чем характеризуется переход фаз?"],
                ["Что получает рабочее тело?"],
                ["В каких единицах измеряется давление?"],
                ["Чем обусловлена кинетическая энергия молекул?"],
                ["Чем характеризуется тепловой процесс?"],
                ["Что позволяет калориметрический эксперимент?"],
                ["Что такое конвекция?"],
                ["Чем определяется тепловой баланс?"],
                ["Как передается количество теплоты?"],
                ["Где сохраняется энергия?"],
                ["Что определяет первый закон термодинамики?"],
                ["Что определяет второй закон термодинамики?"],
                ["От чего зависит эффективность?"],
                ["В виде чего перемещается тепловая энергия?"],
                ["Чем определяется скорость теплообмена?"],
                ["Что уменьшает теплоизоляция?"],
                ["Что включают свойства теплоемкости?"],
                ["Чему равна удельная теплоемкость воды?"],
                ["Что определяет энергия молекул?"],
                ["Что описывает молекулярная кинетика?"],
                ["Как определяется термодинамическая работа?"],
                ["Чем описывается газ?"],
                ["Какие изменения сопровождают фазовые переходы?"],
                ["При каком условии происходит кристаллизация?"],
                ["От чего зависит интенсивность испарения?"],
                ["Чем характеризуется диффузия?"],
                ["От чего зависит скорость диффузии?"],
                ["Чем определяется энергия связи?"]
            ];

            function generateTable() {
                var tableBody = document.getElementById("knowledgeTable");

                questionsArray.forEach(function (question, index) {
                    var item = knowledgeBase[index];
                    var answer = `${item[0].charAt(0).toUpperCase() + item[0].slice(1)} ${item[1]} ${item[2]}.`;

                    var row = document.createElement("tr");
                    var questionCell = document.createElement("td");
                    questionCell.innerHTML = question;
                    var answerCell = document.createElement("td");
                    answerCell.innerHTML = answer;

                    row.appendChild(questionCell);
                    row.appendChild(answerCell);

                    tableBody.appendChild(row);
                });
            }

            document.addEventListener("DOMContentLoaded", generateTable);

            var endings = [
                ["ет","(ет|ут|ют)"], ["ут","(ет|ут|ют)"], ["ют","(ет|ут|ют)"],              //1 спряжение
                ["ит","(ит|ат|ят)"], ["ат","(ит|ат|ят)"], ["ят","(ит|ат|ят)"],              //2 спряжение

                ["ется","(ет|ут|ют)ся"],["утся","(ет|ут|ют)ся"],["ются","(ет|ут|ют)ся"],    //1 спряжение, возвратные
                ["ится","(ит|ат|ят)ся"], ["атся","(ит|ат|ят)ся"], ["ятся","(ит|ат|ят)ся"],  //2 спряжение, возвратные

                ["ен","ен"], ["ена","ена"], ["ено","ено"], ["ены","ены"],                   //краткие прилагательные
                ["ан","ан"], ["ана","ана"], ["ано","ано"], ["аны","аны"],                   //краткие прилагательные
                ["жен","жен"], ["жна","жна"], ["жно","жно"], ["жны","жны"],                 //краткие прилагательные
                    
                ["на","на"], ["но","но"],
                ["такое","- это"]                                                  //дополнение в массив псевдоокончаний	
            ];                                       

            let blacklist = ["замена", "замены", "атрибут", "маршрут", "член", "нет"];

            function getEnding(word) {
              if (blacklist.indexOf(word) !== -1) return -1;
              for (var j = 0; j < endings.length; j++) {
                if (word.endsWith(endings[j][0])) {
                    return j;
                }
              }
              return -1;
            }
        
            function big(str) {
              return str.substring(0, 1).toUpperCase() + str.substring(1);
            }

            function small(str) {
              return str.substring(0, 1).toLowerCase() + str.substring(1);
            }

            function getAnswer(question) {
                let text = small(question);
                let separators = "'\",.!?()[]\\/";
                var result = false;
                var answer = "";

                for (let i = 0; i < separators.length; i++)
                    text = text.replace(separators[i], " " + separators[i]);

                var words = text.split(' ');

                for (let i = 0; i < words.length; i++)
                    words[i] = small(words[i]);

                console.log(words);

                for (var i = 0; i < words.length; i++) {
                    var ending = getEnding(words[i]);
                    var predicate;
                    if (ending >= 0) {
                        words[i] = words[i].slice(0, -endings[ending][0].length) + endings[ending][1];
                        predicate = new RegExp(words[i]);
                        // predicate = new RegExp(".*" + words[i] + ".*");
                        console.log("Предикат:" + predicate);

                        // if (endings[ending][0] === endings[ending][1]) {
                        //     if (!blacklist.includes(words[i])) {
                        //         if (words[i] === "равна" || words[i] ==="равен" || words[i] ==="равно") {
                        //             predicate = new RegExp(words[i]); 
                        //             console.log("Предикат1:" + predicate); 
                        //         } else {
                        //             predicate = new RegExp(words[i] + " " + (words[i + 1] || "."));
                        //             console.log("Предикат2:" + predicate);
                        //             i++;  
                        //         }
                        //     }
                        // }
                        
                        // console.log(predicate);

                        var subject_string = words.slice(i + 1).join(".*");
                        if (subject_string.length > 3) {
                            var subject = new RegExp(".*" + subject_string + ".*");
                            console.log("Подлежащее:" + subject);

                            for (var j = 0; j < knowledgeBase.length; j++) {
                                if (predicate.test(knowledgeBase[j][1]) &&
                                    (subject.test(knowledgeBase[j][0]) || subject.test(knowledgeBase[j][2]))) {
                                    answer += big(knowledgeBase[j][0]) + " " + knowledgeBase[j][1] + " " + knowledgeBase[j][2] + ". ";
                                    result = true;
                                }
                            }
                        }
                    }
                }

                if (!result){
                    var subject_string = words.slice(i + 1).join(".*");

                    if (subject_string.length > 3) {
                        var subject = new RegExp(".*" + subject_string + ".*");
                        console.log(subject);

                        for (var j = 0; j < knowledgeBase.length; j++) {
                            if (subject.test(knowledgeBase[j][0]) || subject.test(knowledgeBase[j][2])) {
                                answer += big(knowledgeBase[j][0]) + " " + knowledgeBase[j][1] + " " + knowledgeBase[j][2] + ". ";
                                result = true;
                            }
                        }
                    }
                }
                
                if (!result) answer = "Ответ не найден. <br/>";
                return answer;
            }
        
            function startDialogue() {
              for (var i = 0; i < 100; i++) {
                if (!confirm("Продолжить диалог?")) break;
                var question = prompt("Введите вопрос", "");
                alert(getAnswer(question));
              } 
            }
        </script>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
            startDialogue();
        }); 
        </script>   

        <script src="/JS/submit.js"></script>
        <script src="/JS/burger.js"></script>
        <script src="/JS/scroll.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>